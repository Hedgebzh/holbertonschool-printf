#include "main.h" int _printf(const char *format, ...) { int index_f = 0; int str_f = 0; va_list (args); va_start (args, format); type_t array[] = { {"c",_print_char}, {"s",_print_str}, {'%',_print_percent}, }; for(index_f = 0; format[index_f] != '\0'; index_f++) { if(format[index_f] != '%') { str_f += _put_char (format[index_f]); } else if(format[index_f + 1] == 'c') { str_f += _print_char(args); index_f++; } else if(format[index_f + 1] == 's') { str_f += _print_str(args); index_f++; } else if(format[index_f + 1] == '%') { str_f += _put_char('%'); index_f++; } } va_end (args); return (str_f); } for (index_a = 0; array[index_a].choice; index_a++) { if(format[index_f + 1] == *array[index_a].choice) { check = 1; str_f += array[index_a].f(args); } } #include "main.h" int _printf(const char *format, ...) { int index_f, str_f = 0; int (*ptr)(va_list); va_list (args); va_start (args, format); if(format == NULL) /* return null if null */ return(0); for(index_f = 0; format[index_f] != '\0'; index_f++) { if (format[index_f] != '%') { str_f += _put_char(format[index_f]); } else { for (index_a = 0; array[index_a].choice; index_a++) { if(format[index_f + 1] == *array[index_a].choice) { check = 1; str_f += array[index_a].f(args); } } index_f++; if (ptr == NULL) /* ptr n'a trouvÃ© aucun format correspondant */ { _put_char('%'); _put_char(format[index_f]); } else { str_f += ptr(args); } } } va_end (args); return (str_f); }
